---
import ThreeScene from './ThreeScene.astro';
---
<div class="sticky-hero flex items-center justify-center text-white relative overflow-hidden z-30 pointer-events-none">
    <!-- Content -->
    <div class="text-center px-4 z-30 pointer-events-none" id="hero-content">
        <h1 class="text-5xl md:text-7xl font-black tracking-wide mb-6 drop-shadow-lg text-blue-600">
            Tired of the fluff?
        </h1>
        <div class="flex flex-col items-center gap-2 animate-pulse-slow drop-shadow-2xl">
            <span class="text-base font-bold uppercase tracking-widest text-blue-600">Scroll</span>
            <svg class="w-6 h-6 animate-bounce text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
        </div>
    </div>
</div>

<style>
    .sticky-hero {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        will-change: transform; /* Optimize for scrolling/compositing */
    }

    .sticky-hero.scrolled-past {
        position: absolute;
        top: 0;
        bottom: auto;
    }
</style>

<script>
    const hero = document.querySelector('.sticky-hero');
    const heroContent = document.getElementById('hero-content');
    
    if (hero) {
        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const windowHeight = window.innerHeight;
            
            // Fade out content based on scroll
            // Fade out completely by 50% of viewport height
            if (heroContent) {
                const opacity = Math.max(0, 1 - (scrollY / (windowHeight * 0.5)));
                heroContent.style.opacity = opacity.toString();
            }

            // If we have scrolled past the hero section (plus a buffer if needed)
            if (scrollY > windowHeight) {
                hero.classList.add('scrolled-past');
            } else {
                hero.classList.remove('scrolled-past');
            }
        }, { passive: true });

        // Listen for slam impact to hide content
        window.addEventListener('slam-impact', () => {
            if (heroContent) heroContent.classList.add('opacity-0', 'transition-opacity', 'duration-200');
        });

        // Listen for slam reset to show content
        window.addEventListener('slam-reset', () => {
            if (heroContent) heroContent.classList.remove('opacity-0');
        });
    }
</script>
